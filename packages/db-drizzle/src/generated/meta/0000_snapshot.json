{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.companies": {
      "name": "companies",
      "schema": "",
      "columns": {
        "company_id": {
          "name": "company_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creator_bot_id": {
          "name": "creator_bot_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "exchange_id": {
          "name": "exchange_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "company_name": {
          "name": "company_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "ticker_symbol": {
          "name": "ticker_symbol",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "total_shares": {
          "name": "total_shares",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "initial_price": {
          "name": "initial_price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "companies_creator_bot_id_fkey": {
          "name": "companies_creator_bot_id_fkey",
          "tableFrom": "companies",
          "tableTo": "bots",
          "schemaTo": "public",
          "columnsFrom": [
            "creator_bot_id"
          ],
          "columnsTo": [
            "bot_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "companies_exchange_id_fkey": {
          "name": "companies_exchange_id_fkey",
          "tableFrom": "companies",
          "tableTo": "exchanges",
          "schemaTo": "public",
          "columnsFrom": [
            "exchange_id"
          ],
          "columnsTo": [
            "exchange_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "companies_exchange_id_ticker_symbol_key": {
          "columns": [
            "exchange_id",
            "ticker_symbol"
          ],
          "nullsNotDistinct": false,
          "name": "companies_exchange_id_ticker_symbol_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.exchanges": {
      "name": "exchanges",
      "schema": "",
      "columns": {
        "exchange_id": {
          "name": "exchange_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "exchange_name": {
          "name": "exchange_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "exchange_code": {
          "name": "exchange_code",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "trading_fee_percent": {
          "name": "trading_fee_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0.1'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "exchanges_exchange_code_key": {
          "columns": [
            "exchange_code"
          ],
          "nullsNotDistinct": false,
          "name": "exchanges_exchange_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.shareholdings": {
      "name": "shareholdings",
      "schema": "",
      "columns": {
        "shareholding_id": {
          "name": "shareholding_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "bot_id": {
          "name": "bot_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "company_id": {
          "name": "company_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "shares": {
          "name": "shares",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "average_purchase_price": {
          "name": "average_purchase_price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "last_updated_at": {
          "name": "last_updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_shareholdings_bot_id": {
          "name": "idx_shareholdings_bot_id",
          "columns": [
            {
              "expression": "bot_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "shareholdings_bot_id_fkey": {
          "name": "shareholdings_bot_id_fkey",
          "tableFrom": "shareholdings",
          "tableTo": "bots",
          "schemaTo": "public",
          "columnsFrom": [
            "bot_id"
          ],
          "columnsTo": [
            "bot_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "shareholdings_company_id_fkey": {
          "name": "shareholdings_company_id_fkey",
          "tableFrom": "shareholdings",
          "tableTo": "companies",
          "schemaTo": "public",
          "columnsFrom": [
            "company_id"
          ],
          "columnsTo": [
            "company_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "shareholdings_bot_id_company_id_key": {
          "columns": [
            "bot_id",
            "company_id"
          ],
          "nullsNotDistinct": false,
          "name": "shareholdings_bot_id_company_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.orders": {
      "name": "orders",
      "schema": "",
      "columns": {
        "order_id": {
          "name": "order_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "bot_id": {
          "name": "bot_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "company_id": {
          "name": "company_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "order_type_id": {
          "name": "order_type_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "is_buy": {
          "name": "is_buy",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "price": {
          "name": "price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "quantity_filled": {
          "name": "quantity_filled",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status_id": {
          "name": "status_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "last_updated_at": {
          "name": "last_updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_orders_bot_id": {
          "name": "idx_orders_bot_id",
          "columns": [
            {
              "expression": "bot_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_company_id": {
          "name": "idx_orders_company_id",
          "columns": [
            {
              "expression": "company_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_status_id": {
          "name": "idx_orders_status_id",
          "columns": [
            {
              "expression": "status_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "orders_bot_id_fkey": {
          "name": "orders_bot_id_fkey",
          "tableFrom": "orders",
          "tableTo": "bots",
          "schemaTo": "public",
          "columnsFrom": [
            "bot_id"
          ],
          "columnsTo": [
            "bot_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "orders_company_id_fkey": {
          "name": "orders_company_id_fkey",
          "tableFrom": "orders",
          "tableTo": "companies",
          "schemaTo": "public",
          "columnsFrom": [
            "company_id"
          ],
          "columnsTo": [
            "company_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "orders_order_type_id_fkey": {
          "name": "orders_order_type_id_fkey",
          "tableFrom": "orders",
          "tableTo": "order_types",
          "schemaTo": "public",
          "columnsFrom": [
            "order_type_id"
          ],
          "columnsTo": [
            "order_type_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "orders_status_id_fkey": {
          "name": "orders_status_id_fkey",
          "tableFrom": "orders",
          "tableTo": "order_statuses",
          "schemaTo": "public",
          "columnsFrom": [
            "status_id"
          ],
          "columnsTo": [
            "status_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.order_types": {
      "name": "order_types",
      "schema": "",
      "columns": {
        "order_type_id": {
          "name": "order_type_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "type_name": {
          "name": "type_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "order_types_type_name_key": {
          "columns": [
            "type_name"
          ],
          "nullsNotDistinct": false,
          "name": "order_types_type_name_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.order_statuses": {
      "name": "order_statuses",
      "schema": "",
      "columns": {
        "status_id": {
          "name": "status_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "status_name": {
          "name": "status_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "order_statuses_status_name_key": {
          "columns": [
            "status_name"
          ],
          "nullsNotDistinct": false,
          "name": "order_statuses_status_name_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.trades": {
      "name": "trades",
      "schema": "",
      "columns": {
        "trade_id": {
          "name": "trade_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "exchange_id": {
          "name": "exchange_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "company_id": {
          "name": "company_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "buy_order_id": {
          "name": "buy_order_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "sell_order_id": {
          "name": "sell_order_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "buyer_bot_id": {
          "name": "buyer_bot_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "seller_bot_id": {
          "name": "seller_bot_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "price": {
          "name": "price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "trade_fee": {
          "name": "trade_fee",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "executed_at": {
          "name": "executed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_trades_company_id": {
          "name": "idx_trades_company_id",
          "columns": [
            {
              "expression": "company_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_trades_executed_at": {
          "name": "idx_trades_executed_at",
          "columns": [
            {
              "expression": "executed_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamp_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "trades_exchange_id_fkey": {
          "name": "trades_exchange_id_fkey",
          "tableFrom": "trades",
          "tableTo": "exchanges",
          "schemaTo": "public",
          "columnsFrom": [
            "exchange_id"
          ],
          "columnsTo": [
            "exchange_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "trades_company_id_fkey": {
          "name": "trades_company_id_fkey",
          "tableFrom": "trades",
          "tableTo": "companies",
          "schemaTo": "public",
          "columnsFrom": [
            "company_id"
          ],
          "columnsTo": [
            "company_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "trades_buy_order_id_fkey": {
          "name": "trades_buy_order_id_fkey",
          "tableFrom": "trades",
          "tableTo": "orders",
          "schemaTo": "public",
          "columnsFrom": [
            "buy_order_id"
          ],
          "columnsTo": [
            "order_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "trades_sell_order_id_fkey": {
          "name": "trades_sell_order_id_fkey",
          "tableFrom": "trades",
          "tableTo": "orders",
          "schemaTo": "public",
          "columnsFrom": [
            "sell_order_id"
          ],
          "columnsTo": [
            "order_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "trades_buyer_bot_id_fkey": {
          "name": "trades_buyer_bot_id_fkey",
          "tableFrom": "trades",
          "tableTo": "bots",
          "schemaTo": "public",
          "columnsFrom": [
            "buyer_bot_id"
          ],
          "columnsTo": [
            "bot_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "trades_seller_bot_id_fkey": {
          "name": "trades_seller_bot_id_fkey",
          "tableFrom": "trades",
          "tableTo": "bots",
          "schemaTo": "public",
          "columnsFrom": [
            "seller_bot_id"
          ],
          "columnsTo": [
            "bot_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.price_history": {
      "name": "price_history",
      "schema": "",
      "columns": {
        "history_id": {
          "name": "history_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "company_id": {
          "name": "company_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "exchange_id": {
          "name": "exchange_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "open_price": {
          "name": "open_price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "close_price": {
          "name": "close_price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "high_price": {
          "name": "high_price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "low_price": {
          "name": "low_price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "volume": {
          "name": "volume",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "period_length": {
          "name": "period_length",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_price_history_company_timestamp": {
          "name": "idx_price_history_company_timestamp",
          "columns": [
            {
              "expression": "company_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "timestamp",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamp_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "price_history_company_id_fkey": {
          "name": "price_history_company_id_fkey",
          "tableFrom": "price_history",
          "tableTo": "companies",
          "schemaTo": "public",
          "columnsFrom": [
            "company_id"
          ],
          "columnsTo": [
            "company_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "price_history_exchange_id_fkey": {
          "name": "price_history_exchange_id_fkey",
          "tableFrom": "price_history",
          "tableTo": "exchanges",
          "schemaTo": "public",
          "columnsFrom": [
            "exchange_id"
          ],
          "columnsTo": [
            "exchange_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "price_history_company_id_timestamp_period_length_key": {
          "columns": [
            "company_id",
            "timestamp",
            "period_length"
          ],
          "nullsNotDistinct": false,
          "name": "price_history_company_id_timestamp_period_length_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.bots": {
      "name": "bots",
      "schema": "",
      "columns": {
        "bot_id": {
          "name": "bot_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "bot_name": {
          "name": "bot_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_active_at": {
          "name": "last_active_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "background_story": {
          "name": "background_story",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bot_character_description": {
          "name": "bot_character_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.current_market_prices": {
      "name": "current_market_prices",
      "schema": "public",
      "columns": {
        "company_id": {
          "name": "company_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "ticker_symbol": {
          "name": "ticker_symbol",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "exchange_id": {
          "name": "exchange_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "exchange_code": {
          "name": "exchange_code",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "current_price": {
          "name": "current_price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "last_trade_time": {
          "name": "last_trade_time",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT c.company_id, c.ticker_symbol, c.exchange_id, e.exchange_code, t.price AS current_price, t.executed_at AS last_trade_time FROM companies c JOIN exchanges e ON c.exchange_id = e.exchange_id LEFT JOIN trades t ON c.company_id = t.company_id WHERE t.executed_at = (( SELECT max(trades.executed_at) AS max FROM trades WHERE trades.company_id = c.company_id))",
      "materialized": false
    },
    "public.order_book": {
      "name": "order_book",
      "schema": "public",
      "columns": {
        "company_id": {
          "name": "company_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "ticker_symbol": {
          "name": "ticker_symbol",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "exchange_id": {
          "name": "exchange_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "exchange_code": {
          "name": "exchange_code",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "is_buy": {
          "name": "is_buy",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "numeric(20, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_quantity": {
          "name": "total_quantity",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "oldest_order_time": {
          "name": "oldest_order_time",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT c.company_id, c.ticker_symbol, c.exchange_id, e.exchange_code, o.is_buy, o.price, sum(o.quantity - o.quantity_filled) AS total_quantity, min(o.created_at) AS oldest_order_time FROM orders o JOIN companies c ON o.company_id = c.company_id JOIN exchanges e ON c.exchange_id = e.exchange_id WHERE o.status_id = (( SELECT order_statuses.status_id FROM order_statuses WHERE order_statuses.status_name::text = 'active'::text)) GROUP BY c.company_id, c.ticker_symbol, c.exchange_id, e.exchange_code, o.is_buy, o.price ORDER BY c.company_id, o.is_buy DESC, o.price DESC",
      "materialized": false
    }
  },
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {}
  }
}